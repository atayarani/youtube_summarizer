# This config was automatically generated from your source code
# Stacks detected: cicd:github-actions:.github/workflows,deps:python:.,package_manager:poetry:.
version: 2.1
orbs:
  python: circleci/python@2
  coverage-reporter: codacy/coverage-reporter@13.15.1
jobs:
  test-python:
    parameters:
      python-version:
        type: string
    # Install dependencies and run tests
    executor:
      name: python/default
      tag: << parameters.python-version >>
    steps:
      - checkout
      - python/install-packages:
          pkg-manager: poetry
      - run:
          name: Run tests
          command: poetry run pytest --cov=./ --cov-report xml -v
      - coverage-reporter/send_report:
          coverage-reports: coverage.xml

workflows:
  test:
    jobs:
      - test-python:
          context: [default]
          matrix:
            parameters:
              python-version: ["3.8", "3.9", "3.10", "3.11", "3.12"]
